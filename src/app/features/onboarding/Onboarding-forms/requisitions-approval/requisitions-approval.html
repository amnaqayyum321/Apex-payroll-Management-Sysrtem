<section class="container-fluid p-0">
      <div class="d-flex justify-content-between mb-3">
    <div class="page-title">
      <i class="fa-solid fa-house"></i>
      <span style="font-weight: 700; color: #566f9e">-</span>
      <span>View All Requsitions Status</span>
    </div>
     </div>
      <section class="table-main-div">
    <div class="rounded-2xl text-gray-200 overflow-x-auto pt-4"></div>

  <table class="min-w-full text-sm border-separate border-spacing-y-2">
    <thead>
      <tr class="text-gray-400 text-left text-xs uppercase tracking-wider">
        <th class="px-3 py-2">Code</th>
        <th class="px-3 py-2">Name</th>
        <th class="px-3 py-2">Status</th>
        <th class="px-3 py-2">Update Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let req of requisitionList" class="bg-[#1e293b] hover:bg-[#27354a] rounded-lg">
        <td class="px-3 py-3 font-medium">{{ req.code }}</td>
        <td class="px-3 py-3 font-medium">{{ req.name }}</td>
       <td class="px-3 py-3 font-medium">
  <span 
    class="status-badge"
    [ngClass]="{
      'draft-badge': req.status === 'DRAFT',
      'submitted-badge': req.status === 'SUBMITTED',
      'approved-badge': req.status === 'APPROVED',
      'open-badge': req.status === 'OPEN',
      'closed-badge': req.status === 'CLOSED',
      'rejected-badge': req.status === 'REJECTED',
      'cancelled-badge': req.status === 'CANCELLED'
    }"
  >
    {{ req.status }}
  </span>
</td>
        <td class="px-3 py-3 font-medium">
   <button class="btn btn-success btn-sm fixed-btn"
        (click)="openApprovalModal(req)"
        [disabled]="STATUS_FLOW[req.status]?.length === 0"
        [ngClass]="{
          'btn-success': STATUS_FLOW[req.status]?.length !== 0,
          'btn-secondary': STATUS_FLOW[req.status]?.length === 0
        }">

  {{ STATUS_FLOW[req.status]?.length === 0 ? 'Updated' : 'Update' }}

</button>
        </td>
      </tr>
    </tbody>
  </table>

    <!-- âœ… Pagination -->
    <div class="d-flex justify-content-end mt-3 me-3">
      <nav aria-label="Page navigation">
        <ul class="pagination">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <a class="page-link" (click)="changePage(currentPage - 1)" aria-label="Previous">
              &laquo;
            </a>
          </li>

          <li
            class="page-item"
            *ngFor="let page of totalPagesArray"
            [class.active]="page === currentPage"
          >
            <a class="page-link" (click)="changePage(page)">{{ page }}</a>
          </li>

          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <a class="page-link" (click)="changePage(currentPage + 1)" aria-label="Next">
              &raquo;
            </a>
          </li>
        </ul>
      </nav>
    </div>

</section>

<!-- MODAL -->
<div class="custom-modal" *ngIf="showModal">
  <div class="modal-content">

    <h5>Update Status</h5>

    <!-- Breadcrumb UI -->
    <div class="breadcrumb-container">
      <div
        *ngFor="let step of getBreadcrumbs(selectedReq.status)"
        class="breadcrumb-step active">
        {{ step }}
      </div>
    </div>

    <!-- Dropdown -->
    <select class="form-select mt-3" [(ngModel)]="selectedStatus">
      <option value="">Update Status</option>
      <option *ngFor="let status of allowedStatuses" [value]="status">
        {{ status }}
      </option>
    </select>

    <div class="mt-3 text-end">
      <button class="btn btn-secondary me-2" (click)="closeModal()">Cancel</button>
      <button class="btn btn-primary" (click)="updateStatus()">Update</button>
    </div>

  </div>
</div>