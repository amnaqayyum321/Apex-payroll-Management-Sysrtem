<div class="candidate-screening-form-container">
    <div class="candidate-screening-form-card">
        <div class="form-header">
            <h2 class="form-title">Interview Feedback</h2>
            <p class="form-subtitle">Complete interview feedback information</p>
        </div>

        <!-- Section 1: Candidate Information -->
        <div class="form-section candidate-info">
            <form class="section-form">
                <h3 class="section-heading">Candidate Information</h3>

                <div class="form-row">
                    <div class="form-group">
                        <label class="input-label">Candidate <span class="required">*</span></label>
                        <div class="custom-dropdown" (click)="toggleDropdown($event,'candidateId')">
                            <div class="dropdown-selected">
                                <span>
                                    {{ (selectedCandidateInfo.firstName && selectedCandidateInfo.lastName)
                                    ? (selectedCandidateInfo.firstName + ' ' + selectedCandidateInfo.lastName)
                                    : 'Select Candidate' }}
                                </span>

                                <i class="fa-solid fa-chevron-down dropdown-arrow"
                                    [class.rotate]="activeDropdown==='candidateId'"></i>
                            </div>
                            <div class="dropdown-options" *ngIf="activeDropdown==='candidateId'">
                                <div class="dropdown-option" *ngFor="let candidate of candidateLisitng"
                                    (click)="selectOption('candidateId',candidate,$event)">
                                    {{ candidate.firstName + ' ' + candidate.lastName }}
                                </div>
                                <div class="dropdown-option text-muted"
                                    *ngIf="!candidateLisitng || candidateLisitng.length === 0">
                                    No candidates available
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="input-label">Select Interview <span class="required">*</span></label>
                        <div class="custom-dropdown" (click)="toggleDropdown($event,'selectedInterview')">
                            <div class="dropdown-selected">
                                <span>
                                    {{ selectedInterviewId || 'Select Interview' }}
                                </span>

                                <i class="fa-solid fa-chevron-down dropdown-arrow"
                                    [class.rotate]="activeDropdown==='selectedInterview'"></i>
                            </div>
                            <div class="dropdown-options" *ngIf="activeDropdown==='selectedInterview'">
                                <div class="dropdown-option" *ngFor="let interview of interviewListing"
                                    (click)="selectOption('selectedInterview',interview,$event)">
                                    {{ interview.code}}
                                </div>
                                <div class="dropdown-option text-muted"
                                    *ngIf="!interviewListing || interviewListing.length === 0">
                                    No interviews available
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <!-- Section 2: Feedback Decision -->
        <div class="form-section basic-decision">
            <form class="section-form">
                <h3 class="section-heading">Interview Decision</h3>

                <div class="form-row">
                    <div class="form-group">
                        <label class="input-label">Result <span class="required">*</span></label>
                        <div class="custom-dropdown" (click)="toggleDropdown($event,'result')">
                            <div class="dropdown-selected">
                                <span>{{ interviewFeedback.result || 'Select Result' }}</span>
                                <i class="fa-solid fa-chevron-down dropdown-arrow"
                                    [class.rotate]="activeDropdown==='result'"></i>
                            </div>
                            <div class="dropdown-options" *ngIf="activeDropdown==='result'">
                                <div class="dropdown-option" *ngFor="let result of resultOptions"
                                    (click)="selectOption('result',result,$event)">
                                    {{ result }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-row full-width">
                    <div class="form-group">
                        <label class="input-label">Remarks</label>
                        <textarea class="form-input" [(ngModel)]="interviewFeedback.remarks" name="remarks" rows="4"
                            placeholder="Enter your feedback and remarks here..."></textarea>
                    </div>
                </div>
            </form>
        </div>

        <!-- Action Buttons -->
        <div class="form-actions">
            <button type="button" class="btn btn-cancel" (click)="onCancel()">
                Cancel
            </button>
            <button type="button" class="btn btn-submit" (click)="saveInterviewFeedback()">Submit Feedback</button>
        </div>
    </div>
</div>