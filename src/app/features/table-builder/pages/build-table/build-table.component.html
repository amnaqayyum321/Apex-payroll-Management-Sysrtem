<div class="container-fluid mt-4 p-0" #scrollContainer>
  <!-- Form Heading -->

  <form [formGroup]="schemaForm" class="schema-form">

    <!-- Table Info -->
    <div class="row mb-3">
        <h3 class="mb-4 table-title">Create Table Schema</h3>

      <div class="col-md-6 col-12 mb-3">
        <label>Table Name</label>
        <input type="text" formControlName="tableName" (keyup)="checkSpace($event)" placeholder="Enter Table Name" class="form-field" />
      </div>

      <div class="col-md-6 col-12 mb-3">
        <label>Display Name</label>
        <input type="text" formControlName="displayName" placeholder="Enter Display Name" class="form-field" />
      </div>
    </div>

    <hr class="form-divider">

    <!-- COLUMNS SECTION -->
    <h5 class="table-title">Columns</h5>
    <div formArrayName="columns">
      <div class="column-box mb-4 p-3 form-section" *ngFor="let col of columns.controls; let i = index" [formGroupName]="i">
        <div class="action-btn mb-3">
          <button class="btn btn-remove" (click)="removeColumn(i)">Remove Column</button>
          <button class="btn btn-add" (click)="addColumn()">Add Column</button>
        </div>
        <div class="row">
          <div class="col-md-6 col-12 mb-2">
            <label>Column Name</label>
            <input type="text" formControlName="columnName" placeholder="Enter Column Name" class="form-field"/>
          </div>

          <div class="col-md-6 col-12 mb-2">
            <label>Display Label</label>
            <input type="text" formControlName="displayLabel" placeholder="Enter Display Label" class="form-field"/>
          </div>

          <div class="col-md-6 col-12 mb-2">
            <label>Data Type</label>
            <input type="text" formControlName="dataType" placeholder="Enter Data Type" class="form-field"/>
          </div>

          <div class="col-md-6 col-12 mb-2">
            <label>Length</label>
            <input type="number" formControlName="length" placeholder="Enter Length" class="form-field"/>
          </div>

          <div class="col-md-6 col-12 mb-2">
            <label>Precision</label>
            <input type="number" formControlName="precision" placeholder="Enter Precision" class="form-field"/>
          </div>

          <div class="col-md-6 col-12 mb-2">
            <label>Scale</label>
            <input type="number" formControlName="scale" placeholder="Enter Scale" class="form-field"/>
          </div>

          <div class="col-md-6 col-12 mb-2">
            <label>Default Value</label>
            <input type="text" formControlName="defaultValue" placeholder="Enter Default Value" class="form-field"/>
          </div>

          <!-- Checkboxes in one row -->
          <div class="col-12 mb-3">
            <div class="checkbox-group">
              <div class="checkbox-item">
                <input type="checkbox" formControlName="nullable" id="nullable{{i}}" class="form-checkbox" />
                <label for="nullable{{i}}">Nullable</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" formControlName="primaryKey" id="primaryKey{{i}}" class="form-checkbox" />
                <label for="primaryKey{{i}}">Primary Key</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" formControlName="unique" id="unique{{i}}" class="form-checkbox" />
                <label for="unique{{i}}">Unique</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" formControlName="indexed" id="indexed{{i}}" class="form-checkbox" />
                <label for="indexed{{i}}">Indexed</label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <hr class="form-divider">

    <!-- RELATIONSHIPS SECTION -->
    <h5 class="table-title">Relationships</h5>

    <div formArrayName="relationships">
      <div class="relation-box mb-4 p-3 form-section" *ngFor="let r of relationships.controls; let i = index" [formGroupName]="i" #relationshipItem>
        <div class="action-btn mb-3">
          <button class="btn btn-remove" (click)="removeRelationship(i)">Remove Relationship</button>
          <button class="btn btn-add" (click)="addRelationship()">Add Relationship</button>
        </div>
        <div class="row">
          <div class="col-md-6 col-12 mb-2">
            <label>Source Table</label>
            <select name="sourceTableName" formControlName="sourceTableName" class="form-field"></select>
          </div>

          <div class="col-md-6 col-12 mb-2">
            <label>Source Column</label>
            <select name="sourceColumnName" formControlName="sourceColumnName" class="form-field"></select>
          </div>

          <div class="col-md-6 col-12 mb-2">
            <label>Target Table</label>
            <select name="targetTableName" formControlName="targetTableName" class="form-field"></select>
          </div>

          <div class="col-md-6 col-12 mb-2">
            <label>Target Column</label>
            <select name="targetColumnName" formControlName="targetColumnName" class="form-field"></select>
          </div>

          <div class="col-md-6 col-12 mb-2">
            <label>Relation Type</label>
            <select name="relationType" formControlName="relationType" class="form-field">
              <option value="ONE_TO_MANY">ONE_TO_MANY</option>
              <option value="MANY_TO_ONE">MANY_TO_ONE</option>
              <option value="ONE_TO_ONE">ONE_TO_ONE</option>
              <option value="MANY_TO_MANY">MANY_TO_MANY</option>
            </select>
          </div>

          <!-- Checkboxes in one row -->
          <div class="col-12 mb-3">
            <div class="checkbox-group">
              <div class="checkbox-item">
                <input type="checkbox" formControlName="onDelete" id="onDelete{{i}}" class="form-checkbox" />
                <label for="onDelete{{i}}">On Delete</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" formControlName="onUpdate" id="onUpdate{{i}}" class="form-checkbox" />
                <label for="onUpdate{{i}}">On Update</label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <hr class="form-divider">

    <!-- Submit -->
    <div class="text-end">
      <button class="btn-submit" (click)="submitForm()">Submit</button>
    </div>

  </form>
</div>