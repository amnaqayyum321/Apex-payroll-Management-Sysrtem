<section class="container-fluid p-0 ms-3 pe-3">
  <!-- Row 1: 4 cards -->
  <div class="row mb-3">
    <div class="col-md-3 mb-3" *ngFor="let card of cards">
      <div class="card0 p-3">
        <!-- Title Top -->
        <h5 class="mb-3" style="font-size: 18px">{{ card.title }}</h5>

        <!-- Number + Percentage in same row -->
        <div class="d-flex justify-content-between align-items-center">
          <h2 class="mb-0" style="font-size: 21px; font-weight: 700">{{ card.number }}</h2>
          <span [ngClass]="getPercentColor(card.percent)">
            {{ getArrow(card.percent) }}
            {{ getPercentDisplay(card.percent) }}%
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Row 2: 3 cards (3 + 6 + 3) -->
  <div class="row mb-3">
    <div class="col-md-3 mb-3">
      <div class="card1 p-3">
        <div class="card-header1">
          {{ cardTitle }}
        </div>
        <div class="card-body">
          <!-- Chart -->
          <div class="chart-wrapper" style="position: relative">
            <canvas id="workingFormatChart"></canvas>
            <span class="chart-center-text">108</span>
          </div>

          <!-- Legend -->
          <div class="d-flex justify-content-around mt-3">
            <div class="legend-item">
              <span class="legend-dot" style="background: #3596f7"></span> Remote
            </div>
            <div class="legend-item">
              <span class="legend-dot" style="background: #aad7ff"></span> On Site
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <div class="card2 p-3">
        <div class="card-header2">Project Employment</div>

        <div class="card-body">
          <canvas id="projectEmploymentChart"></canvas>

          <!-- Legend -->
          <div class="d-flex justify-content-around mt-3">
            <div class="legend-item">
              <span class="legend-dot" style="background: #3596f7"></span> Project
            </div>
            <div class="legend-item">
              <span class="legend-dot" style="background: #aad7ff"></span> Bench
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3 mb-3">
      <div class="card3 p-3">
        <!-- Header -->
        <div class="card-header3">
          {{ cardTitle }}
        </div>

        <div class="card-body">
          <!-- Multi-Segment Progress Bar -->
          <div class="progress mb-3" style="height: 10px">
            <div
              *ngFor="let p of progress"
              class="progress-bar"
              [style.width]="p.value + '%'"
              [style.background-color]="p.color"
            ></div>
          </div>

          <!-- Stats List -->
          <ul class="list-group list-group-flush">
            <li
              *ngFor="let item of stats"
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              <div class="d-flex align-items-center gap-2">
                <span
                  class="rounded-circle d-inline-block"
                  [style.background]="item.color"
                  style="width: 12px; height: 12px"
                ></span>
                <span>{{ item.label }}</span>
              </div>

              <span
                class="badge rounded-pill"
                [ngStyle]="{
                  'background-color': item.badgeBg,
                  color: item.badgeText,
                }"
              >
                {{ item.percentage }}%
              </span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Row 3: 2 cards (6 + 6) -->
  <div class="row mb-3">
    <div class="col-md-6 mb-3">
      <div class="card3 p-3">
        <div class="card-header4">Staff turnover</div>

        <div class="card-body">
          <canvas id="staffTurnoverChart"></canvas>
        </div>
      </div>
    </div>

    <div class="col-md-6 mb-3">
      <div class="card5 p-3">
        <div class="card-header5">
          {{ cardTitle1 }}
        </div>
        <div class="card-body">
          <table class="table custom-table">
            <thead>
              <tr>
                <th>Full Name</th>
                <th>Department</th>
                <th>Type</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of recruitmentData">
                <!-- Avatar + Name -->
                <td>
                  <div class="d-flex align-items-center">
                    <img [src]="item.avatar" class="avatar me-2" />
                    <span>{{ item.name }}</span>
                  </div>
                </td>

                <!-- Department -->
                <td>{{ item.department }}</td>

                <!-- Status -->
                <td>
                  <div class="d-flex align-items-center">
                    <span class="status-dot" [ngStyle]="{ 'background-color': item.color }"></span>
                    {{ item.type }}
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>
