<div class="udf-form-container">
    <div class="udf-form-card">
        <div class="form-header">
            <h2 class="form-title">Create New UDF Field</h2>
            <p class="form-subtitle">Define a new custom field for {{ formCode || 'Form' }}</p>
        </div>

        <form class="udf-form">
            <!-- Row 1: Entity Name & Field Code -->
            <div class="form-row">

                <div class="form-group">
                    <label class="input-label">Field Code <span class="required">*</span></label>
                    <input type="text" class="form-input" [(ngModel)]="fieldCode" name="fieldCode"
                        (input)="onFieldCodeInput()" placeholder="e.g., passport_number" required />
                </div>
                <div class="form-group">
                    <label class="input-label">Label <span class="required">*</span></label>
                    <input type="text" class="form-input" [(ngModel)]="label" name="label"
                        placeholder="e.g., Passport Number" required />
                </div>
            </div>

            <!-- Row 2: Label & Field Type -->
            <div class="form-row">


                <div class="form-group">
                    <label class="input-label">Field Type <span class="required">*</span></label>
                    <div class="custom-dropdown" (click)="toggleFieldTypeDropdown($event)">
                        <div class="dropdown-selected">
                            <span>{{ selectedFieldType || 'Select field type' }}</span>
                            <i class="fa-solid fa-chevron-down dropdown-arrow"
                                [class.rotate]="isFieldTypeDropdownOpen"></i>
                        </div>
                        <div class="dropdown-options" *ngIf="isFieldTypeDropdownOpen">
                            <div class="dropdown-option" *ngFor="let type of fieldTypes"
                                (click)="selectFieldType(type, $event)">
                                {{ type }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="input-label">Max Length</label>
                    <input type="number" class="form-input" [(ngModel)]="maxLength" name="maxLength"
                        placeholder="e.g., 20" min="1" />
                </div>
            </div>



            <!-- Row 3: Precision & Scale (only for NUMBER) -->
            <div class="form-row" *ngIf="fieldType === 'NUMBER'">
                <div class="form-group">
                    <label class="input-label">Precision</label>
                    <input type="number" class="form-input" [(ngModel)]="precision" name="precision"
                        placeholder="e.g., 10" min="0" />
                </div>

                <div class="form-group">
                    <label class="input-label">Scale</label>
                    <input type="number" class="form-input" [(ngModel)]="scale" name="scale" placeholder="e.g., 2"
                        min="0" />
                </div>
            </div>

            <!-- Row 4: Display Order & Validation Regex -->
            <div class="form-row">
                <div class="form-group">
                    <label class="input-label">Display Order <span class="required">*</span></label>
                    <input type="number" class="form-input" [(ngModel)]="displayOrder" name="displayOrder"
                        placeholder="e.g., 10" required min="1" />
                </div>

                <div class="form-group">
                    <label class="input-label">Validation Regex (Optional)</label>
                    <input type="text" class="form-input" [(ngModel)]="validationRegex" name="validationRegex"
                        placeholder="e.g., ^[A-Z0-9]{6,20}$" />
                    <small class="input-hint">Regular expression to validate input (optional)</small>
                </div>
            </div>

            <!-- Row 5: Required Checkbox -->
            <div class="form-row">
                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" class="checkbox-input" [(ngModel)]="required" name="required" />
                        <span class="checkbox-text">Required Field</span>
                    </label>
                </div>
            </div>
            <!-- Action Buttons -->
            <div class="form-actions">
                <button type="button" class="btn btn-cancel" (click)="onCancel()">
                    <i class="fa-solid fa-times"></i>
                    Cancel
                </button>
                <button type="submit" class="btn btn-submit" (click)="onSubmit()">
                    <i class="fa-solid fa-check"></i>
                    Create UDF Field
                </button>
            </div>
        </form>
    </div>
</div>